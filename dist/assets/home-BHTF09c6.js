import{u as G,h as H,a as $,f as K,b as O,c as i,i as h,g as P,S as _,j as m,F as k,t as b,e as U,k as y}from"./index-P96H_6a0.js";import{M as V}from"./main.layout-XTLuNsVu.js";import"./auth.layout-GjYW0eN-.js";import{d as W,g as X}from"./question.model-BUCApRjs.js";var Z=b('<tr><td class="table-cell text-center"></td><td class="table-cell text-center"></td><td class="table-cell text-center"><button type=button class="btn btn-ghost">Share</button><button type=button class="btn btn-ghost">Jawaban</button><button type=button class="btn btn-ghost">Edit</button><button type=button class="btn btn-ghost">Delete'),tt=b('<tr><td class="table-cell text-center"></td><td class="table-cell text-center"><div class="flex justify-center items-center w-full h-[35vh]"><p class=text-2xl>Belum ada pertanyaan</p></div></td><td class="table-cell text-center">'),et=b('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="lg:text-lg text-sm font-bold">Total Data: </span></div><h2 class="lg:text-2xl text-sm font-bold">Question</h2><div class="flex items-center gap-2"><button type=button class="btn btn-primary">Add</button></div></div><div class="divider divider-lg"></div><div class="card shadow-2xl"><div class=card-body><div><div><div class="flex items center justify-between"><div class="flex items-center gap-2"><button type=button class="btn btn-primary">Refresh</button></div></div></div><div class="absolute top-5 right-5"><div class="flex items center justify-between"><input type=search placeholder=Search class="input input-bordered h-[4vh] lg:w-[15vw] w-[50vw]"></div></div><table class="table w-[100%] mt-[5vh] mb-[5vh]"><thead><tr><th class="table-cell text-center">ID</th><th class="table-cell text-center">Question</th><th class="table-cell text-center">Action</th></tr></thead><tbody>'),lt=b('<tr><td class="table-cell text-center"></td><td class="table-cell text-center"><div class="flex justify-center items-center w-full h-[35vh]"><div class="loading loading-lg"></div></div></td><td class="table-cell text-center">');function ct(){const r=G(),{user:p}=H.useAuth(),[D,g]=$(0),[f,j]=$(""),[x,w]=$([]),[l,{mutate:st,refetch:S}]=K(async()=>{const e=(await X())?.filter(s=>s.uid===p()?.id);return g(e?.length||0),e==null||e==null?[]:e});O(()=>{if(f().length===0&&(w([]),g(l()?.length||0)),f().length>0&&Array.isArray(l())&&l()?.length!==0){const t=l()?.filter(e=>e.question.toLowerCase().includes(f().toLowerCase()));w(t||[]),g(t?.length||0)}});const Q=t=>{j(t.target.value)},F=async t=>{y.fire({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(async e=>{if(e.isConfirmed){const s=await W(t);console.log(s),s.id!="NaN"?(y.fire("Deleted!","Your data has been deleted.","success"),S()):y.fire("Failed!","Failed to delete data.","error")}})},C=t=>(()=>{var e=Z(),s=e.firstChild,n=s.nextSibling,c=n.nextSibling,d=c.firstChild,o=d.nextSibling,u=o.nextSibling,v=u.nextSibling;return h(s,()=>t.question.id||"###"),h(n,()=>t.question.question),d.$$click=()=>r(`/${p()?.id}/${t.question.id}`),o.$$click=()=>r("/questions/answer",{state:{questId:t.question.id?.toString(),question:t.question.question}}),u.$$click=()=>r("/questions/edit",{state:t.question}),v.$$click=()=>F(t.question.id?.toString()||""),e})();return i(V,{title:"Question",get children(){var t=et(),e=t.firstChild,s=e.firstChild,n=s.firstChild,c=n.firstChild;c.firstChild;var d=n.nextSibling,o=d.nextSibling,u=o.firstChild,v=s.nextSibling,B=v.nextSibling,E=B.firstChild,L=E.firstChild,q=L.firstChild,N=q.firstChild,T=N.firstChild,M=T.firstChild,A=q.nextSibling,Y=A.firstChild,I=Y.firstChild,R=A.nextSibling,J=R.firstChild,z=J.nextSibling;return h(c,D,null),u.$$click=()=>r("/questions/add"),M.$$click=()=>S(),I.addEventListener("change",a=>Q(a)),h(z,i(P,{get fallback(){return lt()},get children(){return[i(_,{get when(){return m(()=>!!Array.isArray(l()))()&&l()?.length===0},get children(){return tt()}}),i(_,{get when(){return m(()=>!!(Array.isArray(l())&&l()?.length!==0))()&&x().length===0},get children(){return i(k,{get each(){return l()},children:a=>i(C,{question:a})})}}),i(_,{get when(){return m(()=>!!(Array.isArray(l())&&l()?.length!==0))()&&x().length!==0},get children(){return i(k,{get each(){return x()},children:a=>i(C,{question:a})})}})]}})),t}})}U(["click"]);export{ct as default};
