import{u as L,l as T,a as j,o as M,c as i,i as a,S,d as N,t as m,p as o,E as u,e as O}from"./index-D-UhkxB9.js";import{M as V}from"./main.layout-Bf07d-3g.js";import{c as B,a as _,T as G,b as U}from"./auth.layout-BXNnW5Rk.js";import{S as A,f,C as D}from"./safe.form-GaaacsvZ.js";import{u as I}from"./question.model-BA7JUW26.js";var z=m("<span>Ubah"),H=m('<span class="loading loading-dots loading-lg">'),J=m('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body><h2 class=card-title>Add Question</h2><div class="divider divider-lg"></div><form class="form-control flex flex-col items-stretch gap-3"><label class="input input-bordered min-w-full flex items-center gap-2"></label><div class="flex items-center justify-between"></div><div class="divider text-sm"></div><div class="flex justify-center"><button type=submit class="btn btn-block btn-primary w-[25%]"></button></div></form><div class="w-full flex justify-center items-center gap-4 mt-2"><button type=button class="btn btn-block dark:btn-neutral w-[25%]">Back');function Z(){const d=L(),{state:t}=T(),[r,g]=j(!1),e=B({safe_form:_(!1),question:_(t?.question||"",{required:!0,validators:[f.required,f.minLength,f.maxLength]})});M(()=>{(!t||t==null||t==null)&&d("/questions",{replace:!0})});const $=()=>{if(e.isSubmitted){o("System","Formulir sudah dikirimkan",u.ERROR);return}if(!e.isValid){o("System","Silahkan isi semua formulir",u.ERROR);return}if(D.validateToken())e.controls.safe_form.setErrors(null);else{e.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}e.markSubmitted(!0),g(!0),y()},y=async()=>{const s=await I(t?.id||"",{uid:t?.uid||"0",question:e.value.question||""});e.markSubmitted(!1),g(!1),s.id!="NaN"?(o("System","Berhasil mengubah pertanyaan",u.SUCCESS),d("/questions",{replace:!0})):o("System","Gagal mengubah pertanyaan",u.ERROR)};return i(A,{get regenerate(){return!!e.controls.safe_form.errors},get children(){return i(V,{title:"Edit Question",get children(){var s=J(),k=s.firstChild,w=k.firstChild,C=w.firstChild,E=C.firstChild,q=E.nextSibling,c=q.nextSibling,p=c.firstChild,b=p.nextSibling,R=b.nextSibling,Q=R.nextSibling,n=Q.firstChild,F=c.nextSibling,v=F.firstChild;return a(p,i(G,{type:"text",name:"question",get disabled(){return r()},placeholder:"Question",get control(){return e.controls.question},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"})),a(c,i(U,{name:"Question",get control(){return e.controls.question}}),b),n.$$click=$,a(n,i(S,{get when(){return!r()},get children(){return z()}}),null),a(n,i(S,{get when(){return r()},get children(){return H()}}),null),v.$$click=()=>d("/questions"),N(l=>{var h=r(),x=r();return h!==l.e&&(n.disabled=l.e=h),x!==l.t&&(v.disabled=l.t=x),l},{e:void 0,t:void 0}),s}})}})}O(["click"]);export{Z as default};
