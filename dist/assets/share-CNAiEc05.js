import{L as R,u as _,a as p,o as $,p as r,E as n,c as a,S as c,i as o,d as E,t as l,e as C}from"./index-P96H_6a0.js";import{S as q,f,C as A}from"./safe.form-n8FTov3P.js";import{c as L,a as w,A as O,T,b as V}from"./auth.layout-GjYW0eN-.js";import{c as j}from"./answer.model-CW51DwLU.js";import{f as F}from"./question.model-BUCApRjs.js";var P=l('<span class="xl:text-xl font-semibold">'),K=l("<span>Kirim"),M=l('<span class="loading loading-dots loading-lg">'),N=l('<div class="w-full flex flex-col items-stretch gap-3"><label class="input input-bordered flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"></path><path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"></path></svg></label><div class="flex items-center justify-between"></div><button type=submit class="btn btn-block btn-primary">'),B=l('<span class="xl:text-xl font-semibold">Terima kasih telah mengirimkan jawaban'),G=l('<button type=button class="btn btn-primary">Kembali');function U(){const s=R(),u=_(),[S,v]=p(""),[i,g]=p(!1),[b,k]=p(!1),t=L({safe_form:w(!1),answer:w("",{required:!0,validators:[f.required,f.minLength,f.maxLength]})});$(async()=>{(!s||s==null||s==null)&&(r("System","Parameter tidak valid",n.ERROR),u("/",{replace:!0})),await F(s.questid).then(e=>{if(!e||e.id=="NaN"){r("System","Pertanyaan tidak ditemukan",n.ERROR),u("/",{replace:!0});return}if(e.uid!=s.uid){r("System","Pertanyaan tidak ditemukan",n.ERROR),u("/",{replace:!0});return}v(e.question)})});const x=()=>{if(t.isSubmitted){r("System","Formulir sudah dikirimkan",n.ERROR);return}if(!t.isValid){r("System","Silahkan isi semua formulir",n.ERROR);return}if(A.validateToken())t.controls.safe_form.setErrors(null);else{t.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}t.markSubmitted(!0),g(!0),y()},y=async()=>{const e=await j({questId:s.questid,answer:t.value.answer||""});t.markSubmitted(!1),g(!1),e?(r("System","Berhasil menambahkan jawaban",n.SUCCESS),k(!0)):r("System","Gagal menambahkan jawaban",n.ERROR)};return a(q,{get regenerate(){return!!t.controls.safe_form.errors},get children(){return a(O,{get disabled(){return i()},title:"Kirim Pesan",get children(){return[a(c,{get when(){return!b()},get children(){return[(()=>{var e=P();return o(e,S),e})(),(()=>{var e=N(),d=e.firstChild;d.firstChild;var h=d.nextSibling,m=h.nextSibling;return o(d,a(T,{type:"text",name:"jawaban",get disabled(){return i()},placeholder:"Jawaban",get control(){return t.controls.answer},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),o(e,a(V,{name:"Jawaban",get control(){return t.controls.answer}}),h),m.$$click=x,o(m,a(c,{get when(){return!i()},get children(){return K()}}),null),o(m,a(c,{get when(){return i()},get children(){return M()}}),null),E(()=>m.disabled=i()),e})()]}}),a(c,{get when(){return b()},get children(){return[B(),(()=>{var e=G();return e.$$click=()=>u("/",{replace:!0}),e})()]}})]}})}})}C(["click"]);export{U as default};
