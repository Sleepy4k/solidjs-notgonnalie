import{u as A,h as F,a as L,c as t,i as a,S as x,d as j,t as c,p as n,E as o,e as O}from"./index-P96H_6a0.js";import{S as V,f as u,C as B}from"./safe.form-n8FTov3P.js";import{M as G}from"./main.layout-XTLuNsVu.js";import{c as M,a as S,T as D,b as I}from"./auth.layout-GjYW0eN-.js";import{c as N}from"./question.model-BUCApRjs.js";var U=c("<span>Tambah"),z=c('<span class="loading loading-dots loading-lg">'),H=c('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body><h2 class=card-title>Add Question</h2><div class="divider divider-lg"></div><form class="form-control flex flex-col items-stretch gap-3"><label class="input input-bordered min-w-full flex items-center gap-2"></label><div class="flex items-center justify-between"></div><div class="divider text-sm"></div><div class="flex justify-center"><button type=submit class="btn btn-block btn-primary w-[25%]"></button></div></form><div class="w-full flex justify-center items-center gap-4 mt-2"><button type=button class="btn btn-block dark:btn-neutral w-[25%]">Back');function Y(){const m=A(),{user:_}=F.useAuth(),[r,f]=L(!1),e=M({safe_form:S(!1),question:S("",{required:!0,validators:[u.required,u.minLength,u.maxLength]})}),$=()=>{if(e.isSubmitted){n("System","Formulir sudah dikirimkan",o.ERROR);return}if(!e.isValid){n("System","Silahkan isi semua formulir",o.ERROR);return}if(B.validateToken())e.controls.safe_form.setErrors(null);else{e.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}e.markSubmitted(!0),f(!0),y()},y=async()=>{const l=await N({uid:_()?.id?.toString()||"0",question:e.value.question||""});e.markSubmitted(!1),f(!1),l?(n("System","Berhasil menambahkan pertanyaan",o.SUCCESS),m("/questions",{replace:!0})):n("System","Gagal menambahkan pertanyaan",o.ERROR)};return t(V,{get regenerate(){return!!e.controls.safe_form.errors},get children(){return t(G,{title:"Add Question",get children(){var l=H(),k=l.firstChild,w=k.firstChild,C=w.firstChild,E=C.firstChild,R=E.nextSibling,d=R.nextSibling,g=d.firstChild,b=g.nextSibling,q=b.nextSibling,Q=q.nextSibling,s=Q.firstChild,T=d.nextSibling,p=T.firstChild;return a(g,t(D,{type:"text",name:"question",get disabled(){return r()},placeholder:"Question",get control(){return e.controls.question},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"})),a(d,t(I,{name:"Question",get control(){return e.controls.question}}),b),s.$$click=$,a(s,t(x,{get when(){return!r()},get children(){return U()}}),null),a(s,t(x,{get when(){return r()},get children(){return z()}}),null),p.$$click=()=>m("/questions"),j(i=>{var h=r(),v=r();return h!==i.e&&(s.disabled=i.e=h),v!==i.t&&(p.disabled=i.t=v),i},{e:void 0,t:void 0}),l}})}})}O(["click"]);export{Y as default};
