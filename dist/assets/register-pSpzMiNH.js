import{u as q,h as M,a as Z,c as t,i as n,S as R,d as K,t as v,p as c,E as m,e as P}from"./index-P96H_6a0.js";import{S as F,f as r,C as O}from"./safe.form-n8FTov3P.js";import{g as T,e as U,c as B}from"./user.model-DdFY-Ozd.js";import{c as H,a as i,A as j,T as f,b}from"./auth.layout-GjYW0eN-.js";var N=v('<span class="xl:text-xl font-semibold">Hai, ðŸ‘‹ Siap bergabung dengan kami?'),D=v("<span>Daftar"),G=v('<span class="loading loading-dots loading-lg">'),I=v('<div class="w-full flex flex-col items-stretch gap-3"><label class="input input-bordered flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"></path><path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"></path></svg></label><label class="input input-bordered flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"></path><path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"></path></svg></label><label class="input input-bordered flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path fill-rule=evenodd d="M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z"clip-rule=evenodd></path></svg></label><label class="input input-bordered flex items-center gap-2"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16"fill=currentColor class="w-4 h-4 opacity-70"><path fill-rule=evenodd d="M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z"clip-rule=evenodd></path></svg></label><div class="flex items-center justify-between"></div><button type=submit class="btn btn-block btn-primary"></button><div class="divider text-sm">OR</div><div class="w-full flex justify-center items-center gap-4"><button type=button class="btn btn-block dark:btn-neutral">Masuk</button></div><div class="w-full flex justify-center items-center gap-4 mt-2"><button type=button class="btn btn-block dark:btn-neutral">Home');function X(){const h=q();M.useAuth();const[a,w]=Z(!1),e=H({safe_form:i(!1),role:i("user"),name:i("",{required:!0,validators:[r.required,r.minLength,r.maxLength]}),username:i("",{required:!0,validators:[r.required,r.minLength,r.maxLength]}),password:i("",{required:!0,validators:[r.required,r.minLength,r.maxLength]}),password_confirmation:i("",{required:!0,validators:[r.required,r.minLength,r.maxLength]})}),A=()=>{if(e.isSubmitted){c("System","Formulir sudah dikirimkan",m.ERROR);return}if(!e.isValid){c("System","Silahkan isi semua formulir",m.ERROR);return}if(O.validateToken())e.controls.safe_form.setErrors(null);else{e.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}if(e.value.password!==e.value.password_confirmation){c("System","Password tidak sama",m.ERROR);return}e.markSubmitted(!0),w(!0),L()},L=async()=>{const l=T(e.value.username||"",e.value.password||""),u=await U(e.value.password||"",l),o=await B({name:e.value.name||"",username:e.value.username||"",password:u||"",role:e.value.role||"",key:l});if(e.markSubmitted(!1),!o){c("System","Username sudah digunakan, silahkan coba yang lain",m.ERROR),w(!1);return}w(!1),c("System",`Selamat bergabung ${e.value.name}`,m.SUCCESS),h("/login",{replace:!0})};return t(F,{get regenerate(){return!!e.controls.safe_form.errors},get children(){return t(j,{get disabled(){return a()},title:"Masuk",get children(){return[N(),(()=>{var l=I(),u=l.firstChild;u.firstChild;var o=u.nextSibling;o.firstChild;var p=o.nextSibling;p.firstChild;var g=p.nextSibling;g.firstChild;var x=g.nextSibling,d=x.nextSibling,E=d.nextSibling,y=E.nextSibling,S=y.firstChild,V=y.nextSibling,k=V.firstChild;return n(u,t(f,{type:"text",name:"name",get disabled(){return a()},placeholder:"Nama Kamu",get control(){return e.controls.name},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),n(l,t(b,{name:"Name",get control(){return e.controls.name}}),o),n(o,t(f,{type:"text",name:"username",get disabled(){return a()},placeholder:"Username Kamu",get control(){return e.controls.username},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),n(l,t(b,{name:"Username",get control(){return e.controls.username}}),p),n(p,t(f,{type:"password",name:"password",get disabled(){return a()},placeholder:"Password",get control(){return e.controls.password},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),n(l,t(b,{name:"Password",get control(){return e.controls.password}}),g),n(g,t(f,{type:"password",name:"password_confirmation",get disabled(){return a()},placeholder:"Password Konfirmasi",get control(){return e.controls.password_confirmation},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"}),null),n(l,t(b,{name:"Password Konfirmasi",get control(){return e.controls.password_confirmation}}),x),d.$$click=A,n(d,t(R,{get when(){return!a()},get children(){return D()}}),null),n(d,t(R,{get when(){return a()},get children(){return G()}}),null),S.$$click=()=>h("/login"),k.$$click=()=>h("/"),K(s=>{var _=a(),$=a(),C=a();return _!==s.e&&(d.disabled=s.e=_),$!==s.t&&(S.disabled=s.t=$),C!==s.a&&(k.disabled=s.a=C),s},{e:void 0,t:void 0,a:void 0}),l})()]}})}})}P(["click"]);export{X as default};
