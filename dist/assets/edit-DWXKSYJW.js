import{j as U,k as j,n as D,a as y,o as K,u as M,c as a,i as o,S as _,d as N,t as p,p as u,E as d,e as O,f as V}from"./index-DwaEUg6H.js";import{S as A,f as m,C as G}from"./safe.form-ClfdFXyO.js";import{M as Q}from"./main.layout-BFKmz6xn.js";import{c as I,a as $,T as Y,b as z,S as H}from"./auth.layout-Nkgzk94H.js";import{u as J}from"./question.model-BEVY-cNY.js";var W=p("<span>Ubah"),X=p('<span class="loading loading-dots loading-lg">'),Z=p('<div class="w-full h-screen xl:h-auto xl:w-[30%] 2xl:w-[25%] 3xl:w-[20%] px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body><h2 class=card-title>Ubah Pertanyaan</h2><div class="divider divider-lg"></div><form class="form-control flex flex-col items-stretch gap-3"><label class="input input-bordered min-w-full flex items-center gap-2"></label><div class="flex items-center justify-between"></div><div class="divider text-sm"></div><div class="flex justify-center gap-5"><button type=button class="btn btn-block dark:btn-neutral w-[25%]">Kembali</button><button type=submit class="btn btn-block btn-primary w-[25%]">');function ie(){const l=U(),{user:k}=j.useAuth(),{state:r}=D(),[w,C]=y(!1),[n,b]=y(!1),e=I({safe_form:$(!1),question:$(r?.question||"",{required:!0,validators:[m.required,m.minLength,m.maxLength]})});K(()=>{k()||l("/404",{replace:!0}),(!r||r==null||r==null)&&l("/question",{replace:!0})});const q=()=>{if(e.isSubmitted){u("System","Formulir sudah dikirimkan",d.ERROR);return}if(!e.isValid){u("System","Silahkan isi semua formulir",d.ERROR);return}if(G.validateToken())e.controls.safe_form.setErrors(null);else{e.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}e.markSubmitted(!0),b(!0),E()},E=async()=>{const t=await J(r?.id||"",{uid:r?.uid||"0",question:e.value.question||""});e.markSubmitted(!1),b(!1),t.id!="NaN"?(C(!0),u("System","Berhasil mengubah pertanyaan",d.SUCCESS),l("/question",{replace:!0})):u("System","Gagal mengubah pertanyaan",d.ERROR)};return M(t=>{e.isDirty&&!t.defaultPrevented&&!e.controls.safe_form.errors&&!w()&&(t.preventDefault(),setTimeout(()=>{O.fire({title:"Konfirmasi",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",html:H()}).then(c=>{c.isConfirmed&&t.retry(!0)})},100))}),a(A,{get regenerate(){return!!e.controls.safe_form.errors},get children(){return a(Q,{title:"Ubah Pertanyaan",get children(){var t=Z(),c=t.firstChild,R=c.firstChild,T=R.firstChild,L=T.firstChild,B=L.nextSibling,g=B.nextSibling,h=g.firstChild,v=h.nextSibling,F=v.nextSibling,P=F.nextSibling,f=P.firstChild,s=f.nextSibling;return o(h,a(Y,{type:"text",name:"question",get disabled(){return n()},placeholder:"Pertanyaan Kamu",get control(){return e.controls.question},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"})),o(g,a(z,{name:"Pertanyaan kamu",get control(){return e.controls.question}}),v),f.$$click=()=>l("/question"),s.$$click=q,o(s,a(_,{get when(){return!n()},get children(){return W()}}),null),o(s,a(_,{get when(){return n()},get children(){return X()}}),null),N(i=>{var x=n(),S=n();return x!==i.e&&(f.disabled=i.e=x),S!==i.t&&(s.disabled=i.t=S),i},{e:void 0,t:void 0}),t}})}})}V(["click"]);export{ie as default};
