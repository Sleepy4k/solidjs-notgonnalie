import{O as v,j as x,a as b,o as _,p as r,E as n,c as a,S as f,i as u,d as E,t as i,f as C}from"./index-pv8TXPai.js";import{S as j,f as p,C as q}from"./safe.form-C_zh8uXY.js";import{c as O,a as k,A as T,T as F,b as L}from"./auth.layout-CbgWAGRh.js";import{c as P}from"./answer.model-DZBHEoEt.js";import{f as A}from"./question.model-B3gn031e.js";var K=i('<span class="xl:text-xl font-semibold">'),N=i("<span>Kirim"),V=i('<span class="loading loading-dots loading-lg">'),G=i('<div class="w-full flex flex-col items-stretch gap-3"><label class=input-bordered></label><div class="flex items-center justify-between"></div><button type=submit class="btn btn-block btn-primary">'),I=i('<span class="xl:text-xl font-semibold">Terima kasih telah mengirimkan jawaban'),J=i('<div class="flex justify-center gap-5"><button type=button class="btn btn-neutral">Home</button><button type=button class="btn btn-primary">Kirim Lagi');function U(){const s=v(),m=x(),[w,y]=b(""),[l,g]=b(!1),[h,S]=b(!1),t=O({safe_form:k(!1),answer:k("",{required:!0,validators:[p.required,p.minLength,p.maxLength]})});_(async()=>{(!s||s==null||s==null)&&(r("System","Parameter tidak valid",n.ERROR),m("/",{replace:!0})),await A(s.questid).then(e=>{if(!e||e.id=="NaN"){r("System","Pertanyaan tidak ditemukan",n.ERROR),m("/",{replace:!0});return}if(e.uid!=s.uid){r("System","Pertanyaan tidak ditemukan",n.ERROR),m("/",{replace:!0});return}y(e.question)})});const R=()=>{if(t.isSubmitted){r("System","Formulir sudah dikirimkan",n.ERROR);return}if(!t.isValid){r("System","Silahkan isi semua formulir",n.ERROR);return}if(q.validateToken())t.controls.safe_form.setErrors(null);else{t.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}t.markSubmitted(!0),g(!0),$()},$=async()=>{const e=await P({questId:s.questid,answer:t.value.answer||""});t.markSubmitted(!1),g(!1),e?(r("System","Berhasil menambahkan jawaban",n.SUCCESS),S(!0)):r("System","Gagal menambahkan jawaban",n.ERROR)};return a(j,{get regenerate(){return!!t.controls.safe_form.errors},get children(){return a(T,{get disabled(){return l()},title:"Kirim Pesan",get children(){return[a(f,{get when(){return!h()},get children(){return[(()=>{var e=K();return u(e,w),e})(),(()=>{var e=G(),o=e.firstChild,c=o.nextSibling,d=c.nextSibling;return u(o,a(F,{type:"textarea",name:"jawaban",get disabled(){return l()},placeholder:"Jawaban",get control(){return t.controls.answer},class:"grow input input-bordered h-auto pl-1 pr-0"})),u(e,a(L,{name:"Jawaban",get control(){return t.controls.answer}}),c),d.$$click=R,u(d,a(f,{get when(){return!l()},get children(){return N()}}),null),u(d,a(f,{get when(){return l()},get children(){return V()}}),null),E(()=>d.disabled=l()),e})()]}}),a(f,{get when(){return h()},get children(){return[I(),(()=>{var e=J(),o=e.firstChild,c=o.nextSibling;return o.$$click=()=>m("/",{replace:!0}),c.$$click=()=>S(!1),e})()]}})]}})}})}C(["click"]);export{U as default};
