import{j as U,k as j,n as D,a as y,o as K,u as M,c as r,i as o,S as _,d as N,t as g,p as u,E as d,e as O,f as V}from"./index-pv8TXPai.js";import{S as A,f as m,C as G}from"./safe.form-C_zh8uXY.js";import{M as Q}from"./main.layout-CBbFEHOj.js";import{c as I,a as $,T as Y,b as z,S as H}from"./auth.layout-CbgWAGRh.js";import{u as J}from"./question.model-B3gn031e.js";var W=g("<span>Ubah"),X=g('<span class="loading loading-dots loading-lg">'),Z=g('<div class="w-full h-screen xl:h-auto xl:w-[30%] 2xl:w-[25%] 3xl:w-[20%] px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body><h2 class=card-title>Ubah Pertanyaan</h2><div class="divider divider-lg"></div><form class="form-control flex flex-col items-stretch gap-3"><label class=input-bordered></label><div class="flex items-center justify-between"></div><div class="divider text-sm"></div><div class="flex justify-center gap-5"><button type=button class="btn btn-block dark:btn-neutral w-[25%]">Kembali</button><button type=submit class="btn btn-block btn-primary w-[25%]">');function ne(){const s=U(),{isLogged:k}=j.useAuth(),{state:a}=D(),[w,C]=y(!1),[i,b]=y(!1),e=I({safe_form:$(!1),question:$(a?.question||"",{required:!0,validators:[m.required,m.minLength,m.maxLength]})});K(()=>{k()||s("/404",{replace:!0}),(!a||a==null||a==null)&&s("/question",{replace:!0})});const q=()=>{if(e.isSubmitted){u("System","Formulir sudah dikirimkan",d.ERROR);return}if(!e.isValid){u("System","Silahkan isi semua formulir",d.ERROR);return}if(G.validateToken())e.controls.safe_form.setErrors(null);else{e.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}e.markSubmitted(!0),b(!0),E()},E=async()=>{const t=await J(a?.id||"",{uid:a?.uid||"0",question:e.value.question||""});e.markSubmitted(!1),b(!1),t.id!="NaN"?(C(!0),u("System","Berhasil mengubah pertanyaan",d.SUCCESS),s("/question",{replace:!0})):u("System","Gagal mengubah pertanyaan",d.ERROR)};return M(t=>{e.isDirty&&!t.defaultPrevented&&!e.controls.safe_form.errors&&!w()&&(t.preventDefault(),setTimeout(()=>{O.fire({title:"Konfirmasi",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",html:H()}).then(c=>{c.isConfirmed&&t.retry(!0)})},100))}),r(A,{get regenerate(){return!!e.controls.safe_form.errors},get children(){return r(Q,{title:"Ubah Pertanyaan",get children(){var t=Z(),c=t.firstChild,R=c.firstChild,T=R.firstChild,L=T.firstChild,B=L.nextSibling,p=B.nextSibling,h=p.firstChild,v=h.nextSibling,F=v.nextSibling,P=F.nextSibling,f=P.firstChild,l=f.nextSibling;return o(h,r(Y,{type:"textarea",name:"question",get disabled(){return i()},placeholder:"Pertanyaan Kamu",get control(){return e.controls.question},class:"grow input input-bordered h-auto pl-1 pr-0"})),o(p,r(z,{name:"Pertanyaan kamu",get control(){return e.controls.question}}),v),f.$$click=()=>s("/question"),l.$$click=q,o(l,r(_,{get when(){return!i()},get children(){return W()}}),null),o(l,r(_,{get when(){return i()},get children(){return X()}}),null),N(n=>{var x=i(),S=i();return x!==n.e&&(f.disabled=n.e=x),S!==n.t&&(l.disabled=n.t=S),n},{e:void 0,t:void 0}),t}})}})}V(["click"]);export{ne as default};
