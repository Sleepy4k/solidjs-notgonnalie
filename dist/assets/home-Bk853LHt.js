import{j as K,k as z,a as m,g as G,o as H,b as O,c as s,i as h,h as U,S as y,l as p,F as A,t as f,f as V,e as b}from"./index-xKVuO1FU.js";import{S as W,E as X}from"./auth.layout-D5KxWOo8.js";import{M as Z}from"./main.layout-BKV01AT6.js";import{d as tt,g as et}from"./question.model-B9VZ--uK.js";var lt=f('<tr><td class="table-cell text-center"></td><td class="table-cell text-center"></td><td class="table-cell text-center"><button type=button class="btn btn-ghost">Copy Link</button><button type=button class="btn btn-ghost">Jawaban</button><button type=button class="btn btn-ghost">Edit</button><button type=button class="btn btn-ghost">Delete'),nt=f('<tr><td class="table-cell text-center"></td><td class="table-cell text-center"><div class="flex justify-center items-center w-full h-[35vh]"><p class=text-2xl>Belum ada pertanyaan</p></div></td><td class="table-cell text-center">'),st=f('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="flex items-center justify-between"><div class="flex items-center"><span class="lg:text-lg text-xs font-bold">Total Pertanyaan: </span></div><h2 class="lg:text-2xl text-sm font-bold">Pertanyaan</h2><div class="flex items-center"><button type=button class="btn btn-primary lg:w-[7vw] w-[18vw] lg:h-[5vh] h-[4vh] lg:text-lg text-xs">Tambah</button></div></div><div class="divider divider-lg"></div><div class="card shadow-2xl"><div class=card-body><div class="flex items center justify-between"><div class="flex items-center gap-2"><button type=button class="btn btn-primary">Refresh</button></div></div><div class="lg:absolute lg:top-5 lg:right-5 mt-[2vh]"><div class="flex items center justify-between"><input type=input placeholder=Search class="input input-bordered lg:h-[4vh] h-[2.5rem] lg:w-[15vw] w-[50vw]"></div></div><div class=overflow-x-auto><table class="table table-auto w-full mt-[5vh] mb-[5vh]"><thead><tr><th class="table-cell text-center">ID</th><th class="table-cell text-center">Pertanyaan</th><th class="table-cell text-center">Aksi</th></tr></thead><tbody>'),at=f('<tr><td class="table-cell text-center"></td><td class="table-cell text-center"><div class="flex justify-center items-center w-full h-[35vh]"><div class="loading loading-lg"></div></div></td><td class="table-cell text-center">');function ut(){const r=K(),{user:g}=z.useAuth(),[E,x]=m(0),[_,D]=m(""),[v,w]=m([]),[l,{mutate:it,refetch:C}]=G(async()=>{const e=(await et())?.filter(n=>n.uid===g()?.id);return x(e?.length||0),e==null||e==null?[]:e});H(()=>{g()||r("/404",{replace:!0})}),O(()=>{const t=_().length<=0;if(t)w([]),x(l()?.length||0);else if(!t&&Array.isArray(l())&&l()?.length!==0){const e=l()?.filter(n=>n.question.toLowerCase().includes(_().toLowerCase()));w(e||[]),x(e?.length||0)}});const T=t=>D(t.target.value),j=async t=>{b.fire({title:"Konfirmasi",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Tidak, simpan dulu",html:W(X.DELETE)}).then(async e=>{e.isConfirmed&&((await tt(t)).id!="NaN"?(b.fire("Deleted!","Your data has been deleted.","success"),C()):b.fire("Failed!","Failed to delete data.","error"))})},L=async t=>{const e=document.createElement("input");e.value=`${location.href}/#/${g()?.id}/${t}`,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),b.fire("Copied!","Link copied to clipboard.","success")},S=t=>(()=>{var e=lt(),n=e.firstChild,a=n.nextSibling,c=a.nextSibling,d=c.firstChild,o=d.nextSibling,u=o.nextSibling,$=u.nextSibling;return h(n,()=>t.question.id||"###"),h(a,()=>t.question.question),d.$$click=()=>L(t.question.id?.toString()||""),o.$$click=()=>r("/questions/answer",{state:{questId:t.question.id?.toString(),question:t.question.question}}),u.$$click=()=>r("/questions/edit",{state:t.question}),$.$$click=()=>j(t.question.id?.toString()||""),e})();return s(Z,{title:"Pertanyaan",get children(){var t=st(),e=t.firstChild,n=e.firstChild,a=n.firstChild,c=a.firstChild;c.firstChild;var d=a.nextSibling,o=d.nextSibling,u=o.firstChild,$=n.nextSibling,F=$.nextSibling,B=F.firstChild,q=B.firstChild,M=q.firstChild,P=M.firstChild,k=q.nextSibling,N=k.firstChild,Q=N.firstChild,I=k.nextSibling,R=I.firstChild,Y=R.firstChild,J=Y.nextSibling;return h(c,E,null),u.$$click=()=>r("/questions/add"),P.$$click=()=>C(),Q.$$keyup=i=>T(i),h(J,s(U,{get fallback(){return at()},get children(){return[s(y,{get when(){return p(()=>!!Array.isArray(l()))()&&l()?.length===0},get children(){return nt()}}),s(y,{get when(){return p(()=>!!(Array.isArray(l())&&l()?.length!==0))()&&v().length===0},get children(){return s(A,{get each(){return l()},children:i=>s(S,{question:i})})}}),s(y,{get when(){return p(()=>!!(Array.isArray(l())&&l()?.length!==0))()&&v().length!==0},get children(){return s(A,{get each(){return v()},children:i=>s(S,{question:i})})}})]}})),t}})}V(["click","keyup"]);export{ut as default};
