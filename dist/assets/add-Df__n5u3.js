import{j as B,k as F,a as L,o as P,u as j,c as a,i as l,S as y,d as A,t as f,p as s,E as o,e as D,f as K}from"./index-D4_EPOrY.js";import{S as M,f as m,C as O}from"./safe.form-B1noORsA.js";import{M as V}from"./main.layout-BlmNbcS6.js";import{c as G,a as k,T as Q,b as I,S as N}from"./auth.layout-B_n5nO7y.js";import{c as U}from"./question.model-BVKu4pJ6.js";var Y=f("<span>Tambah"),z=f('<span class="loading loading-dots loading-lg">'),H=f('<div class="w-full h-screen xl:h-auto xl:w-[30%] 2xl:w-[25%] 3xl:w-[20%] px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body><h2 class=card-title>Tambah Pertanyaan</h2><div class="divider divider-lg"></div><div class="form-control flex flex-col items-stretch gap-3"><label class="input input-bordered min-w-full flex items-center gap-2"></label><div class="flex items-center justify-between"></div><div class="divider text-sm"></div><div class="flex justify-center gap-5"><button type=button class="btn btn-block dark:btn-neutral w-[25%]">Kembali</button><button type=submit class="btn btn-block btn-primary w-[25%]">');function te(){const u=B(),{user:b}=F.useAuth(),[r,p]=L(!1),e=G({safe_form:k(!1),question:k("",{required:!0,validators:[m.required,m.minLength,m.maxLength]})});P(()=>{b()||u("/404",{replace:!0})});const _=()=>{if(e.isSubmitted){s("System","Formulir sudah dikirimkan",o.ERROR);return}if(!e.isValid){s("System","Silahkan isi semua formulir",o.ERROR);return}if(!O.validateToken()){e.controls.safe_form.setErrors({invalid:"csrf token tidak valid"});return}e.markSubmitted(!0),p(!0),$()},$=async()=>{const t=await U({uid:b()?.id?.toString()||"0",question:e.value.question||""});e.markSubmitted(!1),p(!1),t?(s("System","Berhasil menambahkan pertanyaan",o.SUCCESS),u("/question",{replace:!0})):s("System","Gagal menambahkan pertanyaan",o.ERROR)};return j(t=>{e.isDirty&&!t.defaultPrevented&&!e.controls.safe_form.errors&&(t.preventDefault(),setTimeout(()=>{D.fire({title:"Konfirmasi",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",html:N()}).then(d=>{d.isConfirmed&&t.retry(!0)})},100))}),a(M,{get regenerate(){return!!e.controls.safe_form.errors},get children(){return a(V,{title:"Tambah Pertanyaan",get children(){var t=H(),d=t.firstChild,w=d.firstChild,C=w.firstChild,T=C.firstChild,q=T.nextSibling,g=q.nextSibling,h=g.firstChild,v=h.nextSibling,R=v.nextSibling,E=R.nextSibling,c=E.firstChild,i=c.nextSibling;return l(h,a(Q,{type:"text",name:"question",get disabled(){return r()},placeholder:"Pertanyaan Kamu",get control(){return e.controls.question},class:"grow input outline-none focus:outline-none border-none border-[0px] h-auto pl-1 pr-0"})),l(g,a(I,{name:"Pertanyaan kamu",get control(){return e.controls.question}}),v),c.$$click=()=>u("/question"),i.$$click=_,l(i,a(y,{get when(){return!r()},get children(){return Y()}}),null),l(i,a(y,{get when(){return r()},get children(){return z()}}),null),A(n=>{var x=r(),S=r();return x!==n.e&&(c.disabled=n.e=x),S!==n.t&&(i.disabled=n.t=S),n},{e:void 0,t:void 0}),t}})}})}K(["click"]);export{te as default};
